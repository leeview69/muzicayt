<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AscultÄƒ MuzicÄƒ YouTube</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        #results {
            margin-top: 20px;
            max-width: 600px;
            margin: auto;
            text-align: left;
        }
        .result-item {
            cursor: pointer;
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }
        .result-item:hover {
            background-color: #f0f0f0;
        }
        input[type="range"] {
            width: 100%;
        }
    </style>
</head>
<body>

    <h1>AscultÄƒ MuzicÄƒ de pe YouTube</h1>

    <!-- CÄƒutare YouTube -->
    <input type="text" id="searchQuery" placeholder="CautÄƒ o melodie...">
    <button onclick="searchMusic()">ğŸ” CautÄƒ</button>

    <div id="results"></div>

    <!-- Player YouTube -->
    <div id="player"></div>

    <div>
        <h3>RegleazÄƒ volumul</h3>
        <input type="range" id="volumeControl" min="0" max="100" value="50" step="1" onchange="adjustVolume()">
    </div>

    <div>
        <h3>ControleazÄƒ redarea</h3>
        <button onclick="seekBackward()">âª -10 secunde</button>
        <button onclick="seekForward()">+10 secunde â–¶ï¸</button>
    </div>

    <script>
        let player;

        // ğŸŸ¢ FuncÈ›ie pentru cÄƒutare YouTube (fÄƒrÄƒ API)
        function searchMusic() {
            const query = document.getElementById('searchQuery').value;
            if (!query) {
                alert("IntroduceÈ›i un nume de melodie!");
                return;
            }

            const searchUrl = `https://corsproxy.io/?https://www.youtube.com/results?search_query=${encodeURIComponent(query)}`;

            fetch(searchUrl)
                .then(response => response.text())
                .then(html => {
                    const videoIds = [...html.matchAll(/"videoId":"(.*?)"/g)].map(m => m[1]).slice(0, 5);
                    const titles = [...html.matchAll(/"title":{"runs":\[{"text":"(.*?)"}\]/g)].map(m => m[1]).slice(0, 5);

                    const resultsDiv = document.getElementById("results");
                    resultsDiv.innerHTML = "";

                    videoIds.forEach((videoId, index) => {
                        const title = titles[index] || "Melodie necunoscutÄƒ";
                        const div = document.createElement("div");
                        div.className = "result-item";
                        div.innerText = title;
                        div.onclick = () => playVideo(videoId);
                        resultsDiv.appendChild(div);
                    });
                })
                .catch(error => console.error("Eroare la cÄƒutare:", error));
        }

        // ğŸŸ¢ FuncÈ›ie pentru redare video (fÄƒrÄƒ video)
        function playVideo(videoId) {
            if (!player) {
                var script = document.createElement('script');
                script.src = "https://www.youtube.com/iframe_api";
                document.body.appendChild(script);
            } else {
                player.loadVideoById(videoId);
            }
        }

        // ğŸŸ¢ IniÈ›ializare YouTube Player API
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '0',
                width: '0',
                playerVars: { 'controls': 0, 'rel': 0, 'showinfo': 0 },
                events: { 'onReady': onPlayerReady }
            });
        }

        // ğŸŸ¢ PorneÈ™te automat melodia
        function onPlayerReady(event) {
            event.target.playVideo();
        }

        // ğŸŸ¢ Reglare volum
        function adjustVolume() {
            if (player) {
                player.setVolume(document.getElementById('volumeControl').value);
            }
        }

        // ğŸŸ¢ Derulare -10 secunde
        function seekBackward() {
            if (player) {
                player.seekTo(player.getCurrentTime() - 10, true);
            }
        }

        // ğŸŸ¢ Derulare +10 secunde
        function seekForward() {
            if (player) {
                player.seekTo(player.getCurrentTime() + 10, true);
            }
        }
    </script>

</body>
</html>
